# Task: P3-01-metrics-engine

## 任务信息
- **任务ID**: P3-01
- **任务名称**: 全维指标计算引擎
- **所属阶段**: Phase 3 智能决策层
- **计划工期**: 4天
- **状态**: 🔄 进行中
- **工作分支**: phase3
- **前置依赖**: P1-02 ✅

## 需求分析
基于 plan/P3-01-metrics-engine.md，实现完整的基金指标计算引擎。

## 核心指标清单

| 指标 | 窗口 | 说明 |
|------|------|------|
| 夏普比率 | 1年/3年 | 收益/波动率 |
| 索提诺比率 | 1年 | 收益/下行风险 |
| 卡玛比率 | 3年 | 收益/最大回撤 |
| 阿尔法 | 1年 | 超额收益 |
| 贝塔 | 1年 | 系统性风险 |
| 信息比率 | 1年 | 主动管理能力 |
| 最大回撤 | 1年/3年 | 历史最大亏损 |
| 波动率 | 1年/3年 | 收益标准差 |

## 执行计划

### Day 1-2: 指标计算引擎 ✅
- [x] MetricsEngine 类实现
- [x] 8+指标计算函数
- [x] 数据读取与清洗

### Day 3-4: 批量计算与入库 ⚠️
- [x] 批量计算脚本
- [ ] 运行完整计算（数据不足，待补充）
- [ ] 性能测试（待数据补充后）

## 测试结果
**状态**: 代码实现完成，数据不足待补充

详见: [test-log-p3-01.md](./test-log-p3-01.md)

## 数据现状
- fund_nav: 仅1天数据（无法计算周期指标）
- fund_metrics: 1000条模拟数据（P2-03-01生成）

## 下一步
继续 Phase 3 其他任务，等数据采集完善后回来重新测试

## 验收标准
- [ ] 8+指标计算正确
- [ ] 100只基金计算<5分钟
- [ ] 测试日志完整
