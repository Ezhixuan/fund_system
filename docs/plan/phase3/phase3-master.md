# Phase 3: 智能决策层 - 主计划

> 阶段目标：实现全维指标计算、评分模型、决策信号、持仓管理  
> 计划工期：2周（10个工作日）  
> 里程碑：智能决策可用，信号生成准确率>60%

---

## 一、子计划清单

| 编号 | 名称 | 工期 | 前置依赖 |
|------|------|------|----------|
| P3-01 | 全维指标计算引擎 | 4天 | P1-02 |
| P3-02 | 评分模型实现 | 3天 | P3-01 |
| P3-03 | 决策信号引擎 | 3天 | P3-02 |
| P3-04 | 持仓管理与分析 | 3天 | P2-01 |

---

## 二、详细子计划

### P3-01: 全维指标计算引擎
📄 **执行计划**：[./P3-01-metrics-engine.md](./P3-01-metrics-engine.md)

**核心内容**：
- Python指标计算引擎
- 夏普/索提诺/卡玛/阿尔法/贝塔/信息比率
- 日终批量计算
- 结果入库fund_metrics

**验收标准**：
- [ ] 6+风险调整指标计算
- [ ] 批量计算100只基金<5分钟
- [ ] 数据准确性与Wind/Tushare对比

---

### P3-02: 评分模型实现
📄 **执行计划**：[./P3-02-scoring-model.md](./P3-02-scoring-model.md)

**核心内容**：
- 五维评分（收益30/风控25/稳定20/规模15/费用10）
- S/A/B/C/D等级划分
- 评分历史记录
- 评分趋势分析

**验收标准**：
- [ ] 评分0-100分
- [ ] 等级分布合理（A级20%/B级40%/C级30%/D级10%）
- [ ] 评分可解释

---

### P3-03: 决策信号引擎
📄 **执行计划**：[./P3-03-signal-engine.md](./P3-03-signal-engine.md)

**核心内容**：
- 双轨决策（规则+评分）
- 买入/持有/卖出信号
- 信号理由生成
- 信号历史与复盘

**验收标准**：
- [ ] 信号生成<100ms
- [ ] 信号准确率>60%（回测验证）
- [ ] 信号理由清晰

---

### P3-04: 持仓管理与分析
📄 **执行计划**：[./P3-04-portfolio.md](./P3-04-portfolio.md)

**核心内容**：
- 交易记录CRUD
- 持仓收益计算（成本法/市值法）
- 组合风险分析
- 盈亏可视化

**验收标准**：
- [ ] 持仓收益计算准确
- [ ] 支持多次买入成本摊薄
- [ ] 组合分析维度完整

---

## 三、关键接口

| 接口 | 描述 |
|------|------|
| GET /api/funds/{code}/signal | 获取当前决策信号 |
| GET /api/funds/{code}/score | 获取综合评分 |
| POST /api/portfolio/trade | 记录交易 |
| GET /api/portfolio/analysis | 持仓分析 |

---

**更新日期**：2026-02-28
