# Phase 2: åç«¯æ ¸å¿ƒå±‚ - ä¸»è®¡åˆ’

> é˜¶æ®µç›®æ ‡ï¼šæ„å»ºJavaåç«¯æœåŠ¡ï¼Œå®ç°åŸºé‡‘æ£€ç´¢ã€æŒ‡æ ‡æŸ¥è¯¢ç­‰æ ¸å¿ƒAPI  
> è®¡åˆ’å·¥æœŸï¼š2å‘¨ï¼ˆ10ä¸ªå·¥ä½œæ—¥ï¼‰  
> é‡Œç¨‹ç¢‘ï¼šåç«¯APIå¯ç”¨ï¼ŒåŸºé‡‘æ£€ç´¢å“åº”<200ms

---

## ä¸€ã€é˜¶æ®µæ¦‚è¿°

### 1.1 äº¤ä»˜ç‰©
1. Spring Boot 3.2é¡¹ç›®æ¡†æ¶
2. åŸºé‡‘æ£€ç´¢APIï¼ˆå«æ‹¼éŸ³æœç´¢ï¼‰
3. æŒ‡æ ‡æŸ¥è¯¢API
4. Redisç¼“å­˜é›†æˆ

### 1.2 å…³é”®æˆåŠŸæŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒè¯æ–¹å¼ |
|------|--------|----------|
| APIå“åº”æ—¶é—´ | P99 < 200ms | å‹æµ‹ |
| ç¼“å­˜å‘½ä¸­ç‡ | > 80% | ç›‘æ§ |
| æ¥å£è¦†ç›–ç‡ | > 90% | å•å…ƒæµ‹è¯• |

---

## äºŒã€å­è®¡åˆ’æ¸…å•

| ç¼–å· | åç§° | å·¥æœŸ | å‰ç½®ä¾èµ– | è´Ÿè´£äºº |
|------|------|------|----------|--------|
| P2-01 | Javaé¡¹ç›®æ­å»ºä¸é…ç½® | 3å¤© | P1-01 | å¾…å®š |
| P2-02 | åŸºé‡‘æ£€ç´¢API | 4å¤© | P2-01 | å¾…å®š |
| P2-03 | æŒ‡æ ‡æŸ¥è¯¢API | 4å¤© | P2-01 | å¾…å®š |
| P2-04 | Redisç¼“å­˜é›†æˆ | 2å¤© | P2-02,P2-03 | å¾…å®š |

### ä¾èµ–å…³ç³»å›¾
```
P2-01 â”€â”€â”¬â”€â”€â–º P2-02 â”€â”€â”
        â”‚            â”œâ”€â”€â–º P2-04
        â””â”€â”€â–º P2-03 â”€â”€â”˜
```

---

## ä¸‰ã€æŠ€æœ¯æ ˆ

| ç»„ä»¶ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Java | 17 LTS | è¿è¡Œç¯å¢ƒ |
| Spring Boot | 3.2.x | åº”ç”¨æ¡†æ¶ |
| MyBatis-Plus | 3.5+ | ORMæ¡†æ¶ |
| Redisson | 3.25+ | Rediså®¢æˆ·ç«¯ |
| MySQL Driver | 8.0 | æ•°æ®åº“è¿æ¥ |
| Lombok | 1.18+ | ä»£ç ç®€åŒ– |
| MapStruct | 1.5+ | å¯¹è±¡æ˜ å°„ |

---

## å››ã€é¡¹ç›®ç»“æ„

```
fund-service/
â”œâ”€â”€ src/main/java/com/fund/
â”‚   â”œâ”€â”€ FundApplication.java
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ MyBatisConfig.java
â”‚   â”‚   â”œâ”€â”€ RedisConfig.java
â”‚   â”‚   â””â”€â”€ WebConfig.java
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ FundController.java
â”‚   â”‚   â”œâ”€â”€ MetricsController.java
â”‚   â”‚   â””â”€â”€ HealthController.java
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ FundService.java
â”‚   â”‚   â”œâ”€â”€ FundServiceImpl.java
â”‚   â”‚   â”œâ”€â”€ MetricsService.java
â”‚   â”‚   â””â”€â”€ MetricsServiceImpl.java
â”‚   â”œâ”€â”€ mapper/
â”‚   â”‚   â”œâ”€â”€ FundInfoMapper.java
â”‚   â”‚   â””â”€â”€ FundMetricsMapper.java
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ FundInfo.java
â”‚   â”‚   â””â”€â”€ FundMetrics.java
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ FundVO.java
â”‚   â”‚   â”œâ”€â”€ FundSearchRequest.java
â”‚   â”‚   â””â”€â”€ ApiResponse.java
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ PinyinUtil.java
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ application.yml
â”‚   â”œâ”€â”€ application-dev.yml
â”‚   â””â”€â”€ mapper/
â”‚       â””â”€â”€ FundInfoMapper.xml
â””â”€â”€ pom.xml
```

---

## äº”ã€è¯¦ç»†å­è®¡åˆ’

### P2-01: Javaé¡¹ç›®æ­å»ºä¸é…ç½®
ğŸ“„ **æ‰§è¡Œè®¡åˆ’**ï¼š[./P2-01-java-setup.md](./P2-01-java-setup.md)

**ä¸»è¦å†…å®¹**ï¼š
- Spring Boot 3.2é¡¹ç›®åˆå§‹åŒ–
- MyBatis-Plusé…ç½®
- æ•°æ®åº“è¿æ¥æ± é…ç½®
- ç»Ÿä¸€å“åº”å°è£…

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] é¡¹ç›®å¯å¯åŠ¨
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] å¥åº·æ£€æŸ¥æ¥å£å¯ç”¨

---

### P2-02: åŸºé‡‘æ£€ç´¢API
ğŸ“„ **æ‰§è¡Œè®¡åˆ’**ï¼š[./P2-02-fund-search-api.md](./P2-02-fund-search-api.md)

**ä¸»è¦å†…å®¹**ï¼š
- åŸºé‡‘åŸºç¡€ä¿¡æ¯æŸ¥è¯¢
- å…³é”®è¯æœç´¢ï¼ˆä»£ç /åç§°/æ‹¼éŸ³ï¼‰
- åˆ†é¡µä¸æ’åº
- å¤šæ¡ä»¶ç­›é€‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] æ”¯æŒæ‹¼éŸ³æœç´¢
- [ ] å“åº”æ—¶é—´<200ms
- [ ] åˆ†é¡µåŠŸèƒ½æ­£å¸¸

---

### P2-03: æŒ‡æ ‡æŸ¥è¯¢API
ğŸ“„ **æ‰§è¡Œè®¡åˆ’**ï¼š[./P2-03-metrics-api.md](./P2-03-metrics-api.md)

**ä¸»è¦å†…å®¹**ï¼š
- åŸºé‡‘æŒ‡æ ‡æŸ¥è¯¢
- å‡€å€¼å†å²æŸ¥è¯¢
- TOP Næ’å
- ç­›é€‰æ¡ä»¶æŸ¥è¯¢

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] å…¨ç»´æŒ‡æ ‡è¿”å›
- [ ] æ—¶é—´åºåˆ—æŸ¥è¯¢æ­£å¸¸
- [ ] æ’åºç­›é€‰å¯ç”¨

---

### P2-04: Redisç¼“å­˜é›†æˆ
ğŸ“„ **æ‰§è¡Œè®¡åˆ’**ï¼š[./P2-04-redis-cache.md](./P2-04-redis-cache.md)

**ä¸»è¦å†…å®¹**ï¼š
- Redissoné…ç½®
- ç¼“å­˜æ³¨è§£ä½¿ç”¨
- ç¼“å­˜æ›´æ–°ç­–ç•¥
- ç¼“å­˜ç›‘æ§

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] ç¼“å­˜å‘½ä¸­ç‡>80%
- [ ] ç¼“å­˜æ›´æ–°åŠæ—¶
- [ ] ç¼“å­˜ç©¿é€é˜²æŠ¤

---

## å…­ã€æ¥å£å¥‘çº¦

### ç»Ÿä¸€å“åº”æ ¼å¼
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1709123456789
}
```

### æ ¸å¿ƒAPIåˆ—è¡¨
| æ¥å£ | æ–¹æ³• | æè¿° | ç¼“å­˜ |
|------|------|------|------|
| GET /api/funds/search | æœç´¢ | å…³é”®è¯æœç´¢åŸºé‡‘ | 5min |
| GET /api/funds/{code} | è¯¦æƒ… | åŸºé‡‘è¯¦æƒ… | 1min |
| GET /api/funds/{code}/nav | å‡€å€¼ | å†å²å‡€å€¼ | 1hour |
| GET /api/funds/{code}/metrics | æŒ‡æ ‡ | å…¨ç»´æŒ‡æ ‡ | 5min |
| GET /api/funds/top | æ’å | TOP NåŸºé‡‘ | 1hour |

---

## ä¸ƒã€æ£€æŸ¥ç‚¹

| æ£€æŸ¥ç‚¹ | æ—¶é—´ | æ£€æŸ¥å†…å®¹ |
|--------|------|----------|
| CP2-1 | Week 3 Day 3 | Javaé¡¹ç›®æ­å»ºå®Œæˆ |
| CP2-2 | Week 3 Day 7 | æ£€ç´¢APIå¯ç”¨ |
| CP2-3 | Week 4 Day 3 | æŒ‡æ ‡APIå¯ç”¨ |
| CP2-4 | Week 4 Day 5 | ç¼“å­˜é›†æˆå®Œæˆ |

---

**è´Ÿè´£äºº**ï¼šå¾…å®š  
**æ›´æ–°æ—¥æœŸ**ï¼š2026-02-28
